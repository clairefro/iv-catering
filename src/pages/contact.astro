---
import Container from "../components/Container.astro";
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <Container>
    <h1>Contact</h1>
    <p>Get in touch with us for catering inquiries, bookings, or questions!</p>
    <ul>
      <li>Email: info@ivcatering.com</li>
      <li>Phone: (541) 908-9544</li>
    </ul>

    <form id="contactForm">
      <label>
        Name:
        <input type="text" name="name" required />
      </label>
      <label>
        Email:
        <input type="email" name="email" required />
      </label>
      <label>
        Message:
        <textarea name="message" required></textarea>
      </label>
      <button type="submit">Send</button>
    </form>
    <div id="formStatus"></div>
  </Container>
</Layout>

<script is:inline>
  document
    .getElementById("contactForm")
    .addEventListener("submit", async function (e) {
      e.preventDefault();
      const form = e.target;
      const data = {
        name: form.name.value,
        email: form.email.value,
        message: form.message.value,
      };
      const status = document.getElementById("formStatus");
      if (!status) return;
      try {
        const response = await fetch(
          "https://script.google.com/macros/s/AKfycbwRQCnCcQTOzuq3nzAglvq6t3Xz_njh1bWHdOTz_ukL2-lGuZm7qsAzVsJ2scv59YJCiQ/exec",
          {
            method: "POST",
            body: JSON.stringify(data),
            headers: { "Content-Type": "application/json" },
          },
        );
        if (response.ok) {
          status.textContent = "Thank you! Your message was sent.";
          form.reset();
        } else {
          status.textContent = "Error sending message. Please try again.";
        }
      } catch (err) {
        status.textContent = "Error sending message. Please try again.";
      }
    });
</script>

<style>
  #contactForm {
    background: #fff;
    padding: 2rem;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    display: flex;
    flex-direction: column;
    gap: 1.2rem;
    max-width: 420px;
    margin: 2rem auto;
  }
  #contactForm label {
    display: flex;
    flex-direction: column;
    font-weight: 500;
    color: #222;
    gap: 0.4rem;
  }
  #contactForm input,
  #contactForm textarea {
    padding: 0.7em 1em;
    border: 1px solid #ddd;
    font-size: 1rem;
    font-family: inherit;
    background: #fafafa;
    color: #222;
    resize: vertical;
  }
  #contactForm button {
    background: var(--accent, #eab308);
    color: #fff;
    border: none;
    padding: 0.8em 1.5em;
    font-size: 1.1rem;
    font-family: var(--header-font);
    cursor: pointer;
    margin-top: 0.5rem;
    transition: background 0.2s;
  }
  #contactForm button:hover {
    background: #b97a1a;
  }
  #formStatus {
    margin-top: 1rem;
    font-size: 1.08rem;
    color: #222;
    text-align: center;
  }
</style>
